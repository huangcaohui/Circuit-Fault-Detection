#include "fir.h"

float fir_factor[FIR_ORDER] = {
	-0.00090052,-0.0009135,-0.00085336,-0.00070754,-0.00046797,-0.00013251,0.00029397,0.00079877,
	0.0013611,0.0019523,0.0025367,0.003073,0.0035162,0.0038203,0.0039409,0.0038386,0.0034822,
	0.0028519,0.0019416,0.00076202,-0.0006585,-0.0022728,-0.0040153,-0.0058033,-0.0075396,
	-0.0091156,-0.010416,-0.011323,-0.011723,-0.011512,-0.010602,-0.008924,-0.0064373,
	-0.0031292,0.00098025,0.0058374,0.011355,0.017415,0.023869,0.030546,0.03726,0.04381,
	0.049997,0.055623,0.060507,0.064487,0.06743,0.069237,0.069846,0.069237,
	0.06743,0.064487,0.060507,0.055623,0.049997,0.04381,0.03726,0.030546,
	0.023869,0.017415,0.011355,0.0058374,0.00098025,-0.0031292,-0.0064373,
	-0.008924,-0.010602,-0.011512,-0.011723,-0.011323,-0.010416,-0.0091156,-0.0075396,
	-0.0058033,-0.0040153,-0.0022728,-0.0006585,0.00076202,0.0019416,0.0028519,0.0034822,
	0.0038386,0.0039409,0.0038203,0.0035162,0.003073,0.0025367,0.0019523,0.0013611,
	0.00079877,0.00029397,-0.00013251,-0.00046797,-0.00070754,-0.00085336,-0.0009135,-0.00090052 };
float fir_input_buf[FIR_ORDER];

float fir(float xdata)
{
	int i;
	float f_sum;
	
	f_sum = 0;
	fir_input_buf[0] = xdata;
	
	for (i = 0; i < FIR_ORDER; i++)
	{

		f_sum += fir_input_buf[i] * fir_factor[i];
	}

	
	for (i = FIR_ORDER - 1; i > 0; i--)
	{
		fir_input_buf[i] = fir_input_buf[i - 1];
	}
	
	return f_sum;
}
